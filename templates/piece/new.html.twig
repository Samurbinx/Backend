{% extends 'base.html.twig' %}

{% block body %}

<p>
	<a href="{{ path('app_work_index') }}">Proyectos</a>
	&#60 <a href="{{ path('app_work_show', {'id': work.id}) }}">{{ work.Title }}</a>
	&#60 <a href="{{ path('app_artwork_show', {'id': artwork.id}) }}">{{ artwork.Title }}</a>
	&#60 Nueva pieza
</p>

<div id="show_header">
	<h1>Añadir pieza a {{ artwork.title }}</h1>
	<a href="{{ path('app_artwork_show', {'id': artwork.id}) }}">Salir</a>
</div>

<div id="work_body_form">
	<div id="work_form">
		{{ form_start(form) }}
		{{ form_row(form.Title) }}
		{{ form_row(form.Height) }}
		{{ form_row(form.Width) }}
		{{ form_row(form.Depth) }}
		{{ form_row(form.Images) }}
	</div>
	<div id="work_imageContainer"></div>
</div>
<!-- Botón para enviar el formulario -->
<button type="submit" class="btn btn-success">Guardar</button>
{{ form_end(form) }}


<script>
	document.getElementById('piece_Images').addEventListener('change', function (event) {
		const files = event.target.files;
		const imageContainer = document.getElementById('work_imageContainer');

		if (files) {
			for (let i = 0; i < files.length; i++) {
				const file = files[i];
				if (file.type.match('image.*')) {
					const reader = new FileReader();
					reader.onload = function (e) {
						const imageElement = document.createElement('img');
						imageElement.src = e.target.result;
						imageElement.style.maxHeight = '200px';
						imageContainer.appendChild(imageElement);
					};
					reader.readAsDataURL(file);
				}
			}
		}
	});
</script>

{% endblock %}